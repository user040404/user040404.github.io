<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ウェブサイト開設の手引き</title>
    <link rel="stylesheet" href="https://user040404.github.io/normalize.css" />
    <link rel="stylesheet" href="https://user040404.github.io/style.css" />
    <link rel="icon" href="/favicon.svg" />
</head>
<body><header>
<script type="text/javascript" src="//xa.shinobi.jp/ufo/190668700"></script><noscript><a href="//xa.shinobi.jp/bin/gg?190668700" target="_blank"><img src="//xa.shinobi.jp/bin/ll?190668700" border="0"></a><br><span style="font-size:9px"><img style="margin:0;vertical-align:text-bottom;" src="//img.shinobi.jp/tadaima/fj.gif" width="19" height="11"> </span></noscript>
<div id="date"><time datetime="2025-10-29 11:28:08">2025-10-29 11:28:08</time></div>
<div><a href="https://user040404.github.io/">トップページ</a></div>
<h1>ウェブサイト開設の手引き</h1>
<nav id="TableOfContents">
  <ul>
    <li><a href="#はじめに">はじめに</a></li>
    <li><a href="#hugoおよびgitのインストール">HugoおよびGitのインストール</a></li>
    <li><a href="#ウェブサイトの作成">ウェブサイトの作成</a>
      <ul>
        <li><a href="#ウェブサイトの新規作成">ウェブサイトの新規作成</a></li>
        <li><a href="#テーマの設定">テーマの設定</a></li>
        <li><a href="#記事ファイルの作成">記事ファイルの作成</a></li>
        <li><a href="#ウェブサーバの起動">ウェブサーバの起動</a></li>
        <li><a href="#htmlファイルの生成">HTMLファイルの生成</a></li>
      </ul>
    </li>
    <li><a href="#ウェブサイトの公開">ウェブサイトの公開</a>
      <ul>
        <li><a href="#githubアカウントの取得">GitHubアカウントの取得</a></li>
        <li><a href="#sshの設定">SSHの設定</a></li>
        <li><a href="#リモートリポジトリの作成">リモートリポジトリの作成</a></li>
        <li><a href="#ローカルリポジトリの作成">ローカルリポジトリの作成</a></li>
        <li><a href="#ユーザ名およびメールアドレスの設定">ユーザ名およびメールアドレスの設定</a></li>
        <li><a href="#ブランチ名の変更">ブランチ名の変更</a></li>
        <li><a href="#リモートリポジトリの登録">リモートリポジトリの登録</a></li>
        <li><a href="#リモートリポジトリの初期化">リモートリポジトリの初期化</a></li>
        <li><a href="#ウェブサイトのアップロード">ウェブサイトのアップロード</a></li>
      </ul>
    </li>
    <li><a href="#更新日時の取得">更新日時の取得</a></li>
    <li><a href="#ウェブサイトの更新">ウェブサイトの更新</a></li>
  </ul>
</nav>
</header>
<div id="content">
<h2 id="はじめに">はじめに</h2>
<p><a href="https://ja.wikipedia.org/wiki/Hugo_(%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2)">Hugo</a>で作成したウェブサイトを<a href="https://ja.wikipedia.org/wiki/GitHub">GitHub</a>で公開する方法を紹介します。Hugoは<a href="https://ja.wikipedia.org/wiki/Markdown">Markdown</a>ファイル(*.md)から<a href="https://ja.wikipedia.org/wiki/HyperText_Markup_Language">HTML</a>ファイル(*.html)を生成します。生成されたHTMLファイルをGitHubにアップロードすればウェブサイトが公開されます。HTMLファイルのアップロードには<a href="https://ja.wikipedia.org/wiki/Git">Git</a>を使用します。HugoおよびGitについては<a href="https://maku77.github.io/">天才まくまくノート</a>を参照してください。</p>
<h2 id="hugoおよびgitのインストール">HugoおよびGitのインストール</h2>
<p>HugoおよびGitはコマンドラインで操作するアプリケーションです。ここではコマンドラインの環境としてWindowsターミナルとPowerShellを使用します。</p>
<p>以下のコマンドを入力してHugoおよびGitをインストールします。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># winget install Hugo.Hugo.Extended Git.Git</span></span></code></pre></div></div>
</figure>
<!--
ここではコマンドラインの環境としてMSYS2を使用します。MSYS2については[Unixの基本操作](/unix.html)を参照してください。

MSYS2からHugoおよびGitをインストールします。



<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># pacman -S hugo git</span></span></code></pre></div></div>
</figure>
-->
<h2 id="ウェブサイトの作成">ウェブサイトの作成</h2>
<p><a href="https://maku77.github.io/p/bt5enw6/">Hugoで新規のWebサイトを作成する</a>の説明にしたがってウェブサイトを作成します。</p>
<h3 id="ウェブサイトの新規作成">ウェブサイトの新規作成</h3>
<p>最初にウェブサイトの雛形を作成します。ウェブサイトを構成するファイルがプロジェクトのディレクトリ(ここでは~/my_site)に生成されます。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># cd
</span></span><span style="display:flex;"><span># hugo new site my_site
</span></span><span style="display:flex;"><span>Congratulations! Your new Hugo site was created in C:\Users\user\my_site.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Just a few more steps...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>1. Change the current directory to C:\Users\user\my_site.
</span></span><span style="display:flex;"><span>2. Create or install a theme:
</span></span><span style="display:flex;"><span>   - Create a new theme with the command &#34;hugo new theme &lt;THEMENAME&gt;&#34;
</span></span><span style="display:flex;"><span>   - Install a theme from https://themes.gohugo.io/
</span></span><span style="display:flex;"><span>3. Edit hugo.toml, setting the &#34;theme&#34; property to the theme name.
</span></span><span style="display:flex;"><span>4. Create new content with the command &#34;hugo new content &lt;SECTIONNAME&gt;\&lt;FILENAME&gt;.&lt;FORMAT&gt;&#34;.
</span></span><span style="display:flex;"><span>5. Start the embedded web server with the command &#34;hugo server --buildDrafts&#34;.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>See documentation at https://gohugo.io/.</span></span></code></pre></div></div>
</figure>
<p>表示された英語の手順にしたがって作業を進めていきます。</p>
<p>プロジェクトのディレクトリに移動します。Hugoのコマンドはプロジェクトのトップディレクトリで実行するようにしてください。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># cd my_site</span></span></code></pre></div></div>
</figure>
<h3 id="テーマの設定">テーマの設定</h3>
<p>Hugoのウェブサイトにはテーマを指定する必要があります。既存のテーマを利用することもできますが、ここでは新たにテーマmy_themeを作成します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># hugo new theme my_theme</span></span></code></pre></div></div>
</figure>
<p>作成したテーマを設定ファイルhugo.tomlで指定します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># echo &#34;theme = &#39;my_theme&#39;&#34; &gt;&gt;hugo.toml</span></span></code></pre></div></div>
</figure>
<h3 id="記事ファイルの作成">記事ファイルの作成</h3>
<p>記事ファイルhello.mdを作成します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># hugo new posts/hello.md</span></span></code></pre></div></div>
</figure>
<p>contentディレクトリにhello.mdが生成されていることを確認します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># ls content/posts</span></span></code></pre></div></div>
</figure>
<p>hello.mdをテキストエディタで開くと、ヘッダの部分にタイトルや日付が記述されているのが確認できます。ドラフトの指定は解除しておきます。</p>


<figure class="xCodeBlock">
<figcaption class="xCodeBlock_title">~/my_site/content/posts/hello.md</figcaption>
<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>+++
</span></span><span style="display:flex;"><span>title = &#39;Hello&#39;
</span></span><span style="display:flex;"><span>date = 2024-04-04T04:04:04+09:00
</span></span><span style="display:flex;"><span>draft = false
</span></span><span style="display:flex;"><span>+++
</span></span><span style="display:flex;"><span>Hello!</span></span></code></pre></div></div>
</figure>
<p>ヘッダの下に記事の本文を書いて保存します。Markdownの記述方法については<a href="https://qiita.com/kamorits/items/6f342da395ad57468ae3#%E7%94%BB%E5%83%8F%E3%81%AE%E6%8C%BF%E5%85%A5">Qiita マークダウン記法 一覧表・チートシート</a>を参照してください。</p>
<h3 id="ウェブサーバの起動">ウェブサーバの起動</h3>
<p>Hugoのウェブサーバを起動します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># hugo server</span></span></code></pre></div></div>
</figure>
<p>ウェブブラウザからhttp://localhost:1313/にアクセスするとウェブサイトのトップページが表示され、作成した記事のリンクをクリックすると記事が表示されます。</p>
<p>通常はウェブサーバをバックグラウンドで起動させた状態で記事の更新作業を行います。contentディレクトリの内容が変更されるとウェブブラウザが自動的にリロードされます。</p>
<p>ウェブサーバをバックグラウンドで起動させる以下のような関数をファイルprofile.ps1に定義しておくといいでしょう。</p>


<figure class="xCodeBlock">
<figcaption class="xCodeBlock_title">profile.ps1</figcaption>
<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> Start-HugoServer {
</span></span><span style="display:flex;"><span>    $path = Get-HugoPath
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># すでに hugo サーバーが起動しているか確認</span>
</span></span><span style="display:flex;"><span>    $existing = Get-Process -Name <span style="color:#e6db74">&#34;hugo&#34;</span> -ErrorAction SilentlyContinue
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> ($existing) {
</span></span><span style="display:flex;"><span>        Write-Output <span style="color:#e6db74">&#34;hugo はすでに起動しています（PID: </span>$($existing.Id)<span style="color:#e6db74">）&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># サーバー起動スクリプト</span>
</span></span><span style="display:flex;"><span>    $script = {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">param</span>($path)
</span></span><span style="display:flex;"><span>        hugo -s <span style="color:#e6db74">&#34;</span>$path<span style="color:#e6db74">&#34;</span> server | Out-Null
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 非同期で起動</span>
</span></span><span style="display:flex;"><span>    Start-Job -ScriptBlock $script -ArgumentList $path | Out-Null
</span></span><span style="display:flex;"><span>    Write-Output <span style="color:#e6db74">&#34;hugo を起動しました: hugo -s &#34;&#34;</span>$($path)<span style="color:#e6db74">&#34;&#34; server&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div></div>
</figure>
<h3 id="htmlファイルの生成">HTMLファイルの生成</h3>
<p>コマンドhugoを入力するとpublicディレクトリにウェブサイトのHTMLファイルが生成されます。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># hugo
</span></span><span style="display:flex;"><span>Start building sites …
</span></span><span style="display:flex;"><span>hugo v0.121.2-6d5b44305eaa9d0a157946492a6f319da38de154 windows/amd64 BuildDate=2024-01-05T12:21:15Z VendorInfo=gohugoio
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                   | EN
</span></span><span style="display:flex;"><span>-------------------+-----
</span></span><span style="display:flex;"><span>  Pages            | 17
</span></span><span style="display:flex;"><span>  Paginator pages  |  0
</span></span><span style="display:flex;"><span>  Non-page files   |  1
</span></span><span style="display:flex;"><span>  Static files     |  1
</span></span><span style="display:flex;"><span>  Processed images |  0
</span></span><span style="display:flex;"><span>  Aliases          |  0
</span></span><span style="display:flex;"><span>  Sitemaps         |  1
</span></span><span style="display:flex;"><span>  Cleaned          |  0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Total in 175 ms</span></span></code></pre></div></div>
</figure>
<p>以下のように記事ファイルを作成するとpublic/foo/index.htmlと出力されてしまいます。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># hugo new foo.md</span></span></code></pre></div></div>
</figure>
<p>この挙動が気に入らないのであれば以下の設定を追加します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># echo &#34;uglyurls = true&#34; &gt;&gt;hugo.toml</span></span></code></pre></div></div>
</figure>
<h2 id="ウェブサイトの公開">ウェブサイトの公開</h2>
<h3 id="githubアカウントの取得">GitHubアカウントの取得</h3>
<p>ウェブサイトを公開するにはGitHubのアカウントを取得する必要があります。ユーザ名とパスワードを指定すればアカウントを作成できます。当然ですが他の人が使用しているユーザ名を使用することはできません。以後user_nameは自身のユーザ名に置き換えてください。</p>
<h3 id="sshの設定">SSHの設定</h3>
<p><a href="https://ja.wikipedia.org/wiki/Secure_Shell">SSH</a>はサーバとやりとりするデータを暗号化する仕組みです。詳細については<a href="http://x68000.q-e-d.net/~68user/unix/pickup?ssh">sshコマンドの使い方: UNIXの部屋</a>を参照してください。</p>
<p>アップロードのプロトコルには公開鍵認証のSSHを使用するのでその鍵が必要です。~/.sshにすでに鍵が存在する場合はそれを使用できます。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># ls ~/.ssh</span></span></code></pre></div></div>
</figure>
<p>鍵が存在しない場合は鍵を作成します。鍵のファイル名とパスフレーズ(鍵のパスワード)を聞かれますが、何も入力せずにそのままEnterキーを押してください。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># ssh-keygen -t rsa</span></span></code></pre></div></div>
</figure>
<p>秘密鍵~/.ssh/id_rsaと公開鍵~/.ssh/id_rsa.pubが生成されていることを確認します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># ls ~/.ssh</span></span></code></pre></div></div>
</figure>
<p>公開鍵をクリップボードにコピーします。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># cat ~/.ssh/id_rsa.pub | clip</span></span></code></pre></div></div>
</figure>
<p>GitHubのアカウントにログインして公開鍵を登録します。右上隅にあるプロファイルの画像をクリックして [Settings] &gt; [SSH and GPG keys] の[New SSH key]をクリックします。[Key type]のリストから[Authentication Key]を選択して、先ほどコピーした公開鍵を[Key]に貼り付けたら[Add SSH key]をクリックします。[Title]は空欄のままで構いません。</p>
<p>GitHubにSSHで接続できることを確認します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># ssh -T git@github.com</span></span></code></pre></div></div>
</figure>
<h3 id="リモートリポジトリの作成">リモートリポジトリの作成</h3>
<p>GitHubのアカウントにログインしてリポジトリを作成します。ページの右上隅の[+]をクリックして[New repository]を選択します。[Repository name]にuser_name.github.ioを指定して[Create repository]をクリックします。</p>
<h3 id="ローカルリポジトリの作成">ローカルリポジトリの作成</h3>
<p>GitHubのリポジトリ(以下リモートリポジトリ)にコンテンツをアップロードするにはローカルリポジトリが必要です。プロジェクトmy_siteのpublicディレクトリにローカルリポジトリを作成します。ローカルリポジトリの内容をリモートリポジトリにプッシュすればアップロードできます。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># cd ~/my_site/public
</span></span><span style="display:flex;"><span># git init</span></span></code></pre></div></div>
</figure>
<h3 id="ユーザ名およびメールアドレスの設定">ユーザ名およびメールアドレスの設定</h3>
<p>ローカルリポジトリで使用するユーザ名およびメールアドレスを設定します。USER_NAMEおよびUSER_E-MAILは自身のユーザ名とメールアドレスに置き換えてください。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># git config user.name USER_NAME
</span></span><span style="display:flex;"><span># git config user.email USER_E-MAIL</span></span></code></pre></div></div>
</figure>
<h3 id="ブランチ名の変更">ブランチ名の変更</h3>
<p>ローカルリポジトリで使用するブランチをmasterからmainに変更します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># git branch -M main</span></span></code></pre></div></div>
</figure>
<p>Gitのデフォルトブランチはmasterですが、差別的な表現ということでGitHubではmasterからmainに変更されたようです。</p>
<h3 id="リモートリポジトリの登録">リモートリポジトリの登録</h3>
<p>リモートリポジトリをoriginとして参照できるようにします。リモートリポジトリのアドレスはgit@github.com:user_name/user_name.github.io.gitです。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># git remote add origin git@github.com:user_name/user_name.github.io.git</span></span></code></pre></div></div>
</figure>
<p>変更するにはgit remote set-url originとします。git remote rm originとすれば削除できます。</p>
<p>リモートリポジトリが正しく設定されていることを確認します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># git remote -v</span></span></code></pre></div></div>
</figure>
<h3 id="リモートリポジトリの初期化">リモートリポジトリの初期化</h3>
<p>リモートリポジトリを初期化するためにREADME.mdをローカルリポジトリにコミットしてリモートリポジトリにプッシュします。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># echo &#34;# user_name.github.io&#34; &gt;&gt;README.md
</span></span><span style="display:flex;"><span># git add README.md
</span></span><span style="display:flex;"><span># git commit -m &#34;first commit&#34;
</span></span><span style="display:flex;"><span># git push -u origin main</span></span></code></pre></div></div>
</figure>
<p>ウェブブラウザからリモートリポジトリにアクセスしてREADMEがコミットされていることを確認します。</p>
<p>最後に入力したコマンドgit push -u origin mainは-uオプションを付加したことにより以後git pushとして実行できるようになります。</p>
<h3 id="ウェブサイトのアップロード">ウェブサイトのアップロード</h3>
<p>コンテンツをローカルリポジトリにコミットしてリモートリポジトリにプッシュします。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># git add .
</span></span><span style="display:flex;"><span># git commit -m &#34;update&#34;
</span></span><span style="display:flex;"><span># git push</span></span></code></pre></div></div>
</figure>
<p>リモートリポジトリのmainブランチにコンテンツを置いておくとウェブブラウザからhttps://user_name.github.io/というアドレスでアクセスできます。</p>
<h2 id="更新日時の取得">更新日時の取得</h2>
<p>HugoにはGitのログからファイルの更新日時を取得する機能があります。この機能を使用してウェブページのフッタに更新日時を表示してみます。</p>
<p>ファイルの更新日時を取得するにはプロジェクトのトップディレクトリ(ここでは~/my_site)にリポジトリを作成する必要があります。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># cd ~/my_site
</span></span><span style="display:flex;"><span># git init</span></span></code></pre></div></div>
</figure>
<p>このリポジトリはpublicディレクトリのリポジトリには影響しません。publicディレクトリはこのリポジトリの追跡対象にならないということです。</p>
<p>contentディレクトリのファイルだけを追跡対象にしたいので、その他のファイルおよびディレクトリを追跡対象から外します。~/my_site/.gitignoreに以下を記述します。</p>


<figure class="xCodeBlock">
<figcaption class="xCodeBlock_title">~/my_site/.gitignore</figcaption>
<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>archetypes/
</span></span><span style="display:flex;"><span>data/
</span></span><span style="display:flex;"><span>layouts/
</span></span><span style="display:flex;"><span>public/
</span></span><span style="display:flex;"><span>resources/
</span></span><span style="display:flex;"><span>static/
</span></span><span style="display:flex;"><span>themes/
</span></span><span style="display:flex;"><span>hugo.toml</span></span></code></pre></div></div>
</figure>
<p>ファイルの更新日時を取得するために以下を設定ファイル~/my_site/hugo.tomlに追加します。</p>


<figure class="xCodeBlock">
<figcaption class="xCodeBlock_title">~/my_site/hugo.toml</figcaption>
<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>enableGitInfo = true
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[frontmatter]
</span></span><span style="display:flex;"><span>  date = [&#34;:fileModTime&#34;]</span></span></code></pre></div></div>
</figure>
<p>フッタのテンプレート~/my_site/layouts/partials/footer.htmlに更新日時を挿入します。</p>


<figure class="xCodeBlock">
<figcaption class="xCodeBlock_title">~/my_site/layouts/partials/footer.html</figcaption>
<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>&lt;div id=&#34;date&#34;&gt;&lt;time datetime=&#34;{{ .Lastmod.Format &#34;2006-01-02 15:04:05&#34; }}&#34;&gt;{{ .Lastmod.Format ( .Site.Params.dateformat | default &#34;2006-01-02 15:04:05&#34;) }}&lt;/time&gt;&lt;/div&gt;</span></span></code></pre></div></div>
</figure>
<p>リポジトリにコミットしてログを生成します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># cd ~/my_site
</span></span><span style="display:flex;"><span># git add .
</span></span><span style="display:flex;"><span># git commit -m &#34;update&#34;</span></span></code></pre></div></div>
</figure>
<p>ウェブサーバを起動してウェブブラウザで記事のページを表示してみてください。フッタに更新日時が表示されているはずです。</p>
<h2 id="ウェブサイトの更新">ウェブサイトの更新</h2>
<p>以下のようなシェルスクリプトを使用すればコマンド1つでウェブサイトの更新作業を終わらせることができます。</p>


<figure class="xCodeBlock">
<figcaption class="xCodeBlock_title">upload_content.ps1</figcaption>
<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>$path_here = Get-Location
</span></span><span style="display:flex;"><span>$path_to_site = Join-Path -Path $HOME -ChildPath <span style="color:#e6db74">&#34;my_site&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Set-Location -Path $path_to_site
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 更新日時を取得するためにGitのログを生成</span>
</span></span><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#e6db74">&#34;update&#34;</span>
</span></span><span style="display:flex;"><span>$path = Join-Path -Path $path_to_site -ChildPath <span style="color:#e6db74">&#34;config.toml&#34;</span>
</span></span><span style="display:flex;"><span>Add-Content -Path $path -Value $null
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Write-Host <span style="color:#e6db74">&#34;------------------------------------------------------------&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ウェブサイトのコンテンツを出力</span>
</span></span><span style="display:flex;"><span>hugo -s $path_to_site
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Write-Host <span style="color:#e6db74">&#34;------------------------------------------------------------&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ウェブサイトのコンテンツをアップロード</span>
</span></span><span style="display:flex;"><span>$path = Join-Path -Path $path_to_site -ChildPath <span style="color:#e6db74">&#34;public&#34;</span>
</span></span><span style="display:flex;"><span>Set-Location -Path $path
</span></span><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#e6db74">&#34;update&#34;</span>
</span></span><span style="display:flex;"><span>git push origin main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Set-Location -Path $path_here</span></span></code></pre></div></div>
</figure>
<!--


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/usr/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>PROJECT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">/my_site&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 更新日時を取得するためにGitのログを生成</span>
</span></span><span style="display:flex;"><span>cd <span style="color:#e6db74">${</span>PROJECT<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#e6db74">&#34;update&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ウェブサイトのコンテンツを出力</span>
</span></span><span style="display:flex;"><span>hugo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ウェブサイトのコンテンツをアップロード</span>
</span></span><span style="display:flex;"><span>cd <span style="color:#e6db74">${</span>PROJECT<span style="color:#e6db74">}</span>/public
</span></span><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#e6db74">&#34;update&#34;</span>
</span></span><span style="display:flex;"><span>git push origin main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>exit <span style="color:#ae81ff">0</span></span></span></code></pre></div></div>
</figure>
-->


    </div><footer>
<div>Powered by <a href="https://gohugo.io/">Hugo</a></div>
<div><a target="_blank" href="https://www.amazon.co.jp/b?_encoding=UTF8&tag=foo23-22&linkCode=ur2&linkId=5c65ecd6930af79eab6fbe1abe8e5cb1&camp=247&creative=1211&node=2127209051">Amazonのパソコン・周辺機器</a></div>
</footer>
</body>
</html>
