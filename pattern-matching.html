<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>テキストのパターンマッチング</title>
    <link rel="stylesheet" href="https://user040404.github.io/normalize.css" />
    <link rel="stylesheet" href="https://user040404.github.io/style.css" />
    <link rel="icon" href="/favicon.svg" />
</head>
<body><header>
<script type="text/javascript" src="//xa.shinobi.jp/ufo/190668700"></script><noscript><a href="//xa.shinobi.jp/bin/gg?190668700" target="_blank"><img src="//xa.shinobi.jp/bin/ll?190668700" border="0"></a><br><span style="font-size:9px"><img style="margin:0;vertical-align:text-bottom;" src="//img.shinobi.jp/tadaima/fj.gif" width="19" height="11"> </span></noscript>
<div id="date"><time datetime="2025-11-01 13:55:57">2025-11-01 13:55:57</time></div>
<div><a href="https://user040404.github.io/">トップページ</a></div>
<h1>テキストのパターンマッチング</h1>
<nav id="TableOfContents">
  <ul>
    <li><a href="#はじめに">はじめに</a></li>
    <li><a href="#ワイルドカード">ワイルドカード</a></li>
    <li><a href="#正規表現">正規表現</a></li>
  </ul>
</nav>
</header>
<div id="content">
<h2 id="はじめに">はじめに</h2>
<p><a href="https://ja.wikipedia.org/wiki/%E3%83%AF%E3%82%A4%E3%83%AB%E3%83%89%E3%82%AB%E3%83%BC%E3%83%89_(%E6%83%85%E5%A0%B1%E5%87%A6%E7%90%86)">ワイルドカード</a>および<a href="https://ja.wikipedia.org/wiki/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%8F%BE">正規表現</a>は文字列のパターンを指定する方法です。<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>パターンに文字列が一致することを「マッチする」といい、パターンを指定するための文字としてメタキャラクタ(すべて半角)が定義されています。正規表現は処理系によって記法がまちまちですが、ここではすべての処理系に共通する基本的な正規表現を紹介します。処理系ごとの違いについては<a href="https://www.tohoho-web.com/ex/regexp.html">とほほの正規表現入門</a>を参照してください。</p>
<h2 id="ワイルドカード">ワイルドカード</h2>
<p>ワイルドカードに使用するメタキャラクタは?(疑問符)と*(アスタリスク)です。</p>
<p>疑問符は任意の1文字にマッチします。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターンfoo???はfoo123,fooabcなどの文字列にマッチします。</span></span></code></pre></div></div>
</figure>
<p>アスタリスクは任意の文字列にマッチします。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターンfoo*barはfooで始まりbarで終わる文字列にマッチします。</span></span></code></pre></div></div>
</figure>
<h2 id="正規表現">正規表現</h2>
<p>正規表現に使用するメタキャラクタは次のとおり。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$*+-.?[\]^{|}</span></span></code></pre></div></div>
</figure>
<p>これらのメタキャラクタはパターンの中で特別な意味を持ち他の文字とは区別されます。</p>
<p>メタキャラクタ以外の文字はその文字自身にマッチします。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターンfooは文字列fooにマッチします。
</span></span><span style="display:flex;"><span>パターンbarは文字列barにマッチします。</span></span></code></pre></div></div>
</figure>
<p>メタキャラクタを普通の文字として扱いたいときは直前に\(バックスラッシュ)をつけます。これを「エスケープする」といいます。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターンfoo\\barは文字列foo\barにマッチします。
</span></span><span style="display:flex;"><span>パターンfoo\*barは文字列foo*barにマッチします。</span></span></code></pre></div></div>
</figure>
<p>任意の1文字を表すには.(ピリオド)と[](角かっこ)を使用します。</p>
<p>ピリオドは改行を除く1文字にマッチします。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターンfoo...barはfoofoobar,foobarbarなどの文字列にマッチします。</span></span></code></pre></div></div>
</figure>
<p>角かっこ内の文字列はその文字列の各文字にマッチします。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターン[bar]はbarの各文字にマッチします。</span></span></code></pre></div></div>
</figure>
<p>角かっこ内に\(バックスラッシュ)を含める場合は\\としてエスケープします。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターン[\\]は文字\にマッチします。</span></span></code></pre></div></div>
</figure>
<p>角かっこ内に](閉じる角かっこ)を含める場合は\]としてエスケープします。[(開く角かっこ)はそのままで問題ありません。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターン[\]]は文字]にマッチします。
</span></span><span style="display:flex;"><span>パターン[[]は文字[にマッチします。</span></span></code></pre></div></div>
</figure>
<p>角かっこ内の-(マイナス記号)は文字の範囲を指定するメタキャラクタになります。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターン[0-9]は数字にマッチします。
</span></span><span style="display:flex;"><span>パターン[a-z]は英小文字にマッチします。
</span></span><span style="display:flex;"><span>パターン[-bar]は-barの各文字にマッチします。先頭のマイナス記号はメタキャラクタとして扱われません。
</span></span><span style="display:flex;"><span>パターン[9-0]は無効な表現です。文字コードが左から右へ昇順になるように記述する必要があります。</span></span></code></pre></div></div>
</figure>
<p>角かっこ内の先頭の^(ハット記号)は否定を意味するメタキャラクタになります。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターン[^bar]はbar以外の文字にマッチします。
</span></span><span style="display:flex;"><span>パターン[^0-9]は数字以外の文字にマッチします。
</span></span><span style="display:flex;"><span>パターン[bar^]はbar^の各文字にマッチします。先頭に位置しないハット記号はメタキャラクタとして扱われません。</span></span></code></pre></div></div>
</figure>
<p>角かっこ内ではバックスラッシュ、閉じる角かっこ、先頭に位置しないマイナス記号、先頭のハット記号がメタキャラクタとして扱われ、その他の文字はその文字自身を表します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターン[.*]は.*の各文字にマッチします。</span></span></code></pre></div></div>
</figure>
<p>パターンの連続を表すには*+?{}(アスタリスク、プラス記号、疑問符、波かっこ)を使用します。</p>
<p>アスタリスクは直前のパターンの0回以上の連続を表します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターンf*ooはoo,foo,ffoo,ffffooなどの文字列にマッチします。
</span></span><span style="display:flex;"><span>パターンba*rはbr,bar,baar,baaaarなどの文字列にマッチします。</span></span></code></pre></div></div>
</figure>
<p>プラス記号は直前のパターンの1回以上の連続を表します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターンf+ooはfoo,ffoo,ffffooなどの文字列にマッチします。
</span></span><span style="display:flex;"><span>パターンba+rはbar,baar,baaaarなどの文字列にマッチします。</span></span></code></pre></div></div>
</figure>
<p>疑問符は直前のパターンの0回以上1回以下の連続(直前のパターンの有無)を表します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターンf?ooはoo,fooの各文字列にマッチします。
</span></span><span style="display:flex;"><span>パターンba?rはbr,barの各文字列にマッチします。</span></span></code></pre></div></div>
</figure>
<p>波かっこは直前のパターンの指定回数の連続を表します。</p>
<table>
  <thead>
      <tr>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>{3}</td>
          <td>3回の連続</td>
      </tr>
      <tr>
          <td>{3,}</td>
          <td>3回以上の連続</td>
      </tr>
      <tr>
          <td>{3,4}</td>
          <td>3回以上4回以下の連続</td>
      </tr>
  </tbody>
</table>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターンf{3}ooは文字列fffooにマッチします。
</span></span><span style="display:flex;"><span>パターンf{2,3}ooはffoo,fffooの各文字列にマッチします。</span></span></code></pre></div></div>
</figure>
<p>アスタリスク、プラス記号、疑問符、波かっこの直前にパターンがない表現は無効です。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターン*foo,+bar,?fooはすべて無効な表現です。</span></span></code></pre></div></div>
</figure>
<p>メタキャラクタとしてアスタリスクとプラス記号を含む表現は可能な限り長いパターンにマッチ(最長一致)します。可能な限り短いパターンにマッチ(最短一致)させるにはアスタリスクとプラス記号の直後に疑問符をつけます。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターン.*barは文字列foobarfoobarに対して文字列foobarfoobarにマッチします。
</span></span><span style="display:flex;"><span>パターン.*?barは文字列foobarfoobarに対して文字列foobarにマッチします。</span></span></code></pre></div></div>
</figure>
<p>位置を表すにはハット記号とドル記号を使用します。ハット記号は行頭にマッチします。ドル記号は行末にマッチします。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターン^fooは行頭にある文字列fooにマッチします。
</span></span><span style="display:flex;"><span>パターン^.*barは行頭からbarまでの文字列にマッチします。
</span></span><span style="display:flex;"><span>パターンfoo$は行末にある文字列fooにマッチします。
</span></span><span style="display:flex;"><span>パターン^bar$はbarという文字列のみが存在する行にマッチします。
</span></span><span style="display:flex;"><span>パターン^^は行頭にある文字^にマッチします。行頭に位置しない^はメタキャラクタとして扱われません。
</span></span><span style="display:flex;"><span>パターン$$は行末にある文字$にマッチします。行末に位置しない$はメタキャラクタとして扱われません。</span></span></code></pre></div></div>
</figure>
<p>複数のパターンを指定するには縦棒(パイプ)を使用します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターンfoo|barはfoo,barの各文字列にマッチします。
</span></span><span style="display:flex;"><span>パターンfoo|bar|foobarはfoo,bar,foobarの各文字列にマッチします。
</span></span><span style="display:flex;"><span>パターンf?oo|ba?rはoo,foo,br,barの各文字列にマッチします。</span></span></code></pre></div></div>
</figure>
<p>メタキャラクタの適用範囲を指定するには丸かっこを使用します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターン(foo)?barはbar,foobarの各文字列にマッチします。
</span></span><span style="display:flex;"><span>パターン(foo)+barはfoobar,foofoobar,foofoofoobarなどの文字列にマッチします。
</span></span><span style="display:flex;"><span>パターン(foo|bar)fooはfoofoo,barfooの各文字列にマッチします。</span></span></code></pre></div></div>
</figure>
<p>\1,\2,\3などはn番目の丸かっこで囲まれたパターンにマッチした文字列に置き換えられます。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターン(foo)(bar)\2\1は文字列foobarbarfooにマッチします。</span></span></code></pre></div></div>
</figure>
<p>丸かっこで囲んだグループをキャプチャしてほしくない場合は開く丸かっこを(?:とします。</p>
<p>よく使用される慣用的な正規表現として以下のようなものがあります。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>パターン.*は任意の文字列にマッチします。(ワイルドカードのアスタリスクと同じ意味になります)
</span></span><span style="display:flex;"><span>パターン^$は空行にマッチします。
</span></span><span style="display:flex;"><span>パターン^.*$は任意の1行にマッチします。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>パターン[ -~]は制御文字を含まない表示可能な半角文字にマッチします。
</span></span><span style="display:flex;"><span>パターン[\x00-\x7F]は制御文字を含む半角文字にマッチします。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>パターン[｡-ﾟ]は半角カタカナにマッチします。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>パターン[^\x00-\x7F]およびパターン[^ -~｡-ﾟ]は全角文字にマッチします。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>パターン[A-Za-z0-9]は半角の英数字にマッチします。
</span></span><span style="display:flex;"><span>パターン[!-/:-@[-`{-~]は半角の記号にマッチします。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>パターン[Ａ-Ｚａ-ｚ０-９]は全角の英数字にマッチします。
</span></span><span style="display:flex;"><span>パターン[！-～]は全角の記号にマッチします。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>パターン[\u3040-\u309F]はひらがなにマッチします。
</span></span><span style="display:flex;"><span>パターン[\u30A0-\u30FF]はカタカナ(全角)にマッチします。
</span></span><span style="display:flex;"><span>パターン[\u4E00-\u9FFF]は漢字(CJK統合漢字ブロック)にマッチします。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>パターン[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+.[A-Za-z]{2,}はメールアドレスにマッチします。
</span></span><span style="display:flex;"><span>パターンhttps?://[^\s/.?#].[^\s]*はURLにマッチします。
</span></span><span style="display:flex;"><span>パターン(A-Za-z0-9?.)+[A-Za-z]{2,}はドメイン名にマッチします。
</span></span><span style="display:flex;"><span>パターン&lt;([A-Za-z][A-Za-z0-9-]*)\b[^&gt;]*&gt;(.*?)&lt;/\1&gt;はHTMLの要素にマッチします。\1にタグ名\2に内部コンテンツがキャプチャされます。</span></span></code></pre></div></div>
</figure>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>ワイルドカードと正規表現を混同した記述が多く見受けられますが惑わされないよう注意してください。両者は似て非なるものです。&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>


    </div><footer>
<div>Powered by <a href="https://gohugo.io/">Hugo</a></div>
<div><a target="_blank" href="https://www.amazon.co.jp/b?_encoding=UTF8&tag=foo23-22&linkCode=ur2&linkId=5c65ecd6930af79eab6fbe1abe8e5cb1&camp=247&creative=1211&node=2127209051">Amazonのパソコン・周辺機器</a></div>
</footer>
</body>
</html>
